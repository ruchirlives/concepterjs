# ConcepterJS

React-based workspace to manage and visualize hierarchical “containers” (projects, tasks, states, etc.). It provides a grid for data entry, multiple visualizations (flow, matrix, kanban, donut, mermaid), a geographic map view, and rich export options (PNG, SVG, DOCX). It integrates with a backend API for persistence and bulk operations.

Frontend for: https://github.com/ruchirlives/concepter

---

## Features

- Interactive Grid: AG Grid with filtering, sorting, editing, and context menus.
- Flow Graph: Relationship visualization with React Flow and edge/node helpers.
- Map View: InfiniteCanvas map with draggable/scalable nodes and backdrop topo map; export to PNG and SVG.
- Mermaid + Gantt: Live Mermaid rendering and Gantt export.
- DOCX Export: Generate documents from selected containers.
- Layers and States: Layer toggling, state views, matrix and kanban boards.
- Sync: BroadcastChannel-based communication between components (selection, filtering, etc.).

---

## Quick Start

Prerequisites
- Node.js 18+ recommended
- npm (or yarn)

Install and run
- `git clone https://github.com/yourusername/concepterjs.git`
- `cd concepterjs`
- `npm install`
- `npm start` (starts on Create React App dev server)

Configuration
- Set API URL and optional passcode in `src/apiConfig.js` or via your own wiring.
- At runtime, you can set the passcode in the header input; a server selector is available in the footer panel.

---

## Usage Highlights

- Grid: Manage containers (ID, Name, Description, Tags, Dates). Right‑click for context actions.
- Flow: Visualize relationships; build edges and groups; context menu actions for nodes/edges.
- Map: Drag nodes with Alt+drag, scale with Shift+drag. Use the Headings panel on the right to:
  - Refresh Map: Re-render the cached backdrop at current zoom.
  - Export PNG: Choose scale, grid snap, and presets (fit/2k/4k).
  - Export SVG: Vector export of map, grid, nodes, and labels with explicit fills/strokes for reliable import.
- Mermaid: View and export Mermaid diagrams.
- DOCX: Use the document exporter to create Word documents.

---

## Project Structure (selected)

- `src/index.js`: App composition and routing of major panels.
- `src/AppGrid.js`: AG Grid data entry and editing.
- `src/AppFlow.js`: React Flow relationship view and helpers.
- `src/AppMap.jsx`: InfiniteCanvas map, export controls (PNG/SVG).
- `src/hooks/useMapNodes.js`: Node layout, draw, context menu, PNG/SVG exporters.
- `src/hooks/useBackdropMap.js`: TopoJSON loading, d3-geo projection, bitmap/vector map, SVG path helper.
- `src/AppMermaid.js`: Mermaid rendering.
- `src/components/DocxExporter.jsx`: DOCX export utilities.
- `src/api.js`, `src/apiConfig.js`: API calls and configuration.

---

## Exports

- PNG Export (Map): Controlled via scale, grid step, and snapping; includes backdrop map and grid.
- SVG Export (Map): Emits explicit `fill` and `stroke` values to avoid black imports. Example shape emissions:
  - `<circle cx="x" cy="y" r="10" fill="#3498db" stroke="#000" stroke-width="1"/>`
  - `<text x="x" y="y-15" font-size="14" text-anchor="middle" fill="black">Label</text>`
- Mermaid: Copy/export diagram source and image from the Mermaid panel.
- DOCX: Generate Word documents for selected containers.

---

## Scripts

- `npm start`: Run dev server.
- `npm run build`: Production build.
- `npm test`: Run tests (if configured).

---

## Contributing

1. Fork the repo
2. Create a branch: `git checkout -b feature/your-feature`
3. Commit: `git commit -m "feat: add your feature"`
4. Push: `git push origin feature/your-feature`
5. Open a PR

---

## License

GPLv3 — see [LICENSE](./LICENSE).

A Scotland topojson map is included which was generated by https://github.com/martinjc/UK-GeoJSON

Licence Information
Contains Ordnance Survey, Office of National Statistics, National Records Scotland and LPS Intellectual Property data © Crown copyright and database right [2016]. Data licensed under the terms of the Open Government Licence (http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3). Ordnance Survey data covered by OS OpenData Licence. Any further sub-licences must retain this attribution.
---

## Support

Open an issue on GitHub for bugs or feature requests.

---

## Third-Party Dependencies (not bundled)

- infinite-canvas — https://github.com/emilefokkema/infinite-canvas — MIT
- Mermaid — https://mermaid.js.org/ — MIT
- React — https://react.dev/ — MIT
- React Flow (`@xyflow/react`) — https://reactflow.dev/ — MIT
- AG Grid (`ag-grid-react`, `ag-grid-community`) — https://www.ag-grid.com/ — MIT (Community)
- D3 Geo (`d3-geo`) — https://github.com/d3/d3-geo — ISC
- TopoJSON Client — https://github.com/topojson/topojson-client — ISC
- Docx (`docx`) — https://github.com/dolanmiu/docx — MIT
